<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{TITLE}} | {{CUISINE}}</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">

    <style>
        :root {
            --mediterranean-blue: #1e3a5f;
            --olive-green: #556b2f;
            --terracotta: #c65d3b;
            --feta-white: #f8f6f0;
            --warm-stone: #e6e2d3;
            --deep-sea: #0f2027;
            --accent-gold: #d4a373;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cormorant Garamond', serif;
            background: linear-gradient(135deg, var(--feta-white), var(--warm-stone));
            color: var(--deep-sea);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .hero {
            background: linear-gradient(135deg, var(--mediterranean-blue), var(--deep-sea));
            color: var(--feta-white);
            padding: 80px 0 120px;
            clip-path: polygon(0 0, 100% 0, 100% 90%, 0 100%);
        }

        .cuisine-tag {
            background: var(--terracotta);
            padding: 8px 24px;
            border-radius: 30px;
            letter-spacing: 3px;
            text-transform: uppercase;
            display: inline-block;
            margin-bottom: 24px;
        }

        h1 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(3rem, 8vw, 5rem);
        }

        .subtitle {
            font-size: 1.5rem;
            font-style: italic;
            margin-bottom: 40px;
        }

        .meta-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
        }

        .meta-value {
            font-size: 2.5rem;
            color: var(--accent-gold);
        }

        .recipe-grid {
            display: grid;
            grid-template-columns: 1fr 1.5fr;
            gap: 40px;
        }

        .ingredients-panel,
        .instructions-panel {
            background: white;
            padding: 40px;
            border-radius: 24px;
        }

        .ingredients-list {
            list-style: none;
        }

        .ingredient-qty {
            margin-right: 0.4em;
            display: inline-block;
        }

        .instruction-step {
            display: flex;
            gap: 24px;
            margin-bottom: 24px;
            cursor: pointer;
        }

        .tips-section {
            margin-top: 40px;
            background: linear-gradient(135deg, var(--olive-green), #3d4f1f);
            color: white;
            padding: 40px;
            border-radius: 24px;
        }

        .tips-list {
            list-style: none;
        }

        .print-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--terracotta);
            color: white;
            padding: 16px 32px;
            border-radius: 50px;
            border: none;
            cursor: pointer;
        }
    </style>
</head>

<body>

<section class="hero">
    <div class="container">
        <span class="cuisine-tag">{{CUISINE}}</span>

        <h1>{{TITLE}}<br>
            <span style="font-size:0.6em;opacity:0.9;">{{SUBTITLE}}</span>
        </h1>

        <p class="subtitle">{{DESCRIPTION}}</p>

        <div class="meta-cards">
            <div>
                <span class="meta-value">{{TIME}}</span>
                <div>Minutes</div>
            </div>
            <div>
                <span class="meta-value">{{SERVINGS}}</span>
                <div>Servings</div>
            </div>
            <div>
                <span class="meta-value">{{CALORIES}}</span>
                <div>Calories</div>
            </div>
            <div>
                <span class="meta-value">{{DIFFICULTY}}</span>
                <div>Difficulty</div>
            </div>
        </div>
    </div>
</section>

<div class="container">
    <div class="recipe-grid">

        <aside class="ingredients-panel">
            <h2>Ingredients</h2>
            <p>Servings: <span id="servingsDisplay">{{SERVINGS}}</span></p>

            <button onclick="adjustServings(-1)">-</button>
            <button onclick="adjustServings(1)">+</button>

            <ul class="ingredients-list" id="ingredientsList">
                {{INGREDIENTS_LIST}}
            </ul>
        </aside>

        <main class="instructions-panel">
            <h2>Preparation</h2>

            <div class="instructions-list" id="instructionsList">
                {{STEPS_HTML}}
            </div>

            <div class="tips-section">
                <h3>Chefâ€™s Secrets</h3>
                <ul class="tips-list">
                    {{TIPS_LIST}}
                </ul>
            </div>
        </main>

    </div>
</div>

<button class="print-btn" onclick="window.print()">Print Recipe</button>

<script>
    let currentServings = parseInt("{{SERVINGS}}") || 3;
    const baseServings = parseInt("{{SERVINGS}}") || 3;

    const timeEl = document.querySelector('.meta-cards .meta-value');
    const baseTime = timeEl ? (parseFloat(timeEl.textContent) || 0) : 0;

    function formatQty(x) {
        return x.toFixed(2).replace(/\.00$/, '').replace(/(\.\d)0$/, '$1');
    }

    function updateIngredients() {
        const ratio = currentServings / baseServings;
        document.querySelectorAll('.ingredient-item').forEach(item => {
            const base = parseFloat(item.dataset.base);
            if (!base) return;

            const unit = item.dataset.unit || "";
            const name = item.dataset.name || "";

            const qty = formatQty(base * ratio);
            const qtyEl = item.querySelector('.ingredient-qty');
            const nameEl = item.querySelector('.ingredient-name');

            if (qtyEl) qtyEl.textContent = qty;
            if (nameEl) nameEl.textContent = unit ? `${unit} ${name}` : name;
        });
    }

    function updateTime() {
        if (!timeEl || !baseTime) return;
        const ratio = currentServings / baseServings;
        const newTime = Math.max(1, Math.round(baseTime * ratio));
        timeEl.textContent = newTime;
    }

    function adjustServings(change) {
        const next = currentServings + change;
        if (next < 1 || next > 12) return;
        currentServings = next;
        document.getElementById('servingsDisplay').textContent = currentServings;
        updateIngredients();
        updateTime();
    }

    function toggleStep(el) {
        el.classList.toggle('completed');
    }
</script>

</body>
</html>

